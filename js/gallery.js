// Photo data with actual photos
const photoData = {
    contracts: [
        {
            src: 'images/Contracts/IMG_7694.jpg',
            title: 'Contract Photo 1',
            description: 'Professional contract photography'
        },
        {
            src: 'images/Contracts/IMG_7683.jpg',
            title: 'Contract Photo 2',
            description: 'Business documentation'
        },
        {
            src: 'images/Contracts/V10A0442.jpg',
            title: 'Contract Photo 3',
            description: 'Professional photography'
        },
        {
            src: 'images/Contracts/V10A0410.jpg',
            title: 'Contract Photo 4',
            description: 'Contract session'
        },
        {
            src: 'images/Contracts/V10A0413.jpg',
            title: 'Contract Photo 5',
            description: 'Business photography'
        },
        {
            src: 'images/Contracts/IMG_7688 2.jpg',
            title: 'Contract Photo 6',
            description: 'Professional documentation'
        }
    ],
    graduation: [
        {
            src: 'images/Graduation parties/DSC_6547-min.JPG',
            title: 'Graduation Photo 1',
            description: 'Graduation celebration'
        },
        {
            src: 'images/Graduation parties/DSC_6641-min.JPG',
            title: 'Graduation Photo 2',
            description: 'Achievement moments'
        },
        {
            src: 'images/Graduation parties/DSC_6659-min.JPG',
            title: 'Graduation Photo 3',
            description: 'Special graduation day'
        },
        {
            src: 'images/Graduation parties/DSC_6819-min.JPG',
            title: 'Graduation Photo 4',
            description: 'Celebrating success'
        },
        {
            src: 'images/Graduation parties/DSC_6978-min.JPG',
            title: 'Graduation Photo 5',
            description: 'Graduation party'
        },
        {
            src: 'images/Graduation parties/DSC_9906-min.JPG',
            title: 'Graduation Photo 6',
            description: 'Academic achievement'
        },
        {
            src: 'images/Graduation parties/DSC_6324-min.JPG',
            title: 'Graduation Photo 7',
            description: 'Graduation memories'
        },
        {
            src: 'images/Graduation parties/DSC_6385-min.JPG',
            title: 'Graduation Photo 8',
            description: 'Celebrating graduates'
        },
        {
            src: 'images/Graduation parties/DSC_6538-min.JPG',
            title: 'Graduation Photo 9',
            description: 'Graduation ceremony'
        },
        {
            src: 'images/Graduation parties/DSC_6650-min.JPG',
            title: 'Graduation Photo 10',
            description: 'Special moments'
        },
        {
            src: 'images/Graduation parties/DSC_6643-min.JPG',
            title: 'Graduation Photo 11',
            description: 'Graduate celebration'
        },
        {
            src: 'images/Graduation parties/DSC_6741-min.JPG',
            title: 'Graduation Photo 12',
            description: 'Academic success'
        },
        {
            src: 'images/Graduation parties/DSC_6820-min.JPG',
            title: 'Graduation Photo 13',
            description: 'Graduation party'
        },
        {
            src: 'images/Graduation parties/DSC_6967-min.JPG',
            title: 'Graduation Photo 14',
            description: 'Celebrating achievement'
        },
        {
            src: 'images/Graduation parties/DSC_7117-min.JPG',
            title: 'Graduation Photo 15',
            description: 'Graduation memories'
        },
        {
            src: 'images/Graduation parties/DSC_2154-min.JPG',
            title: 'Graduation Photo 16',
            description: 'Special graduation day'
        },
        {
            src: 'images/Graduation parties/DSC_2274-min.JPG',
            title: 'Graduation Photo 17',
            description: 'Graduate portraits'
        },
        {
            src: 'images/Graduation parties/DSC_6663-min_4_.jpg',
            title: 'Graduation Photo 18',
            description: 'Graduation celebration'
        },
        {
            src: 'images/Graduation parties/DSC_6677-min_1.jpg',
            title: 'Graduation Photo 19',
            description: 'Academic achievement'
        }
    ],
    portrait: [
        {
            src: 'images/portrait/137A2438 copy.jpg',
            title: 'Portrait 1',
            description: 'Professional portrait'
        },
        {
            src: 'images/portrait/137A2483 copy.jpg',
            title: 'Portrait 2',
            description: 'Creative portrait session'
        },
        {
            src: 'images/portrait/137A2491 copy.jpg',
            title: 'Portrait 3',
            description: 'Studio portrait'
        },
        {
            src: 'images/portrait/137A4220 copy3.jpg',
            title: 'Portrait 4',
            description: 'Professional photography'
        },
        {
            src: 'images/portrait/PHOTO-2025-05-08-00-13-16.jpg',
            title: 'Portrait 5',
            description: 'Creative portrait'
        },
        {
            src: 'images/portrait/PHOTO-2025-05-02-23-34-54.jpg',
            title: 'Portrait 6',
            description: 'Portrait session'
        },
        {
            src: 'images/portrait/137A0229 copy ٢.jpg',
            title: 'Portrait 7',
            description: 'Professional portrait'
        },
        {
            src: 'images/portrait/137A8986 copy.jpg',
            title: 'Portrait 8',
            description: 'Creative photography'
        },
        {
            src: 'images/portrait/137A9038 copy.jpg',
            title: 'Portrait 9',
            description: 'Portrait session'
        },
        {
            src: 'images/portrait/137A9875 copyف.jpg',
            title: 'Portrait 10',
            description: 'Professional portrait'
        },
        {
            src: 'images/portrait/137A2403 copy.jpg',
            title: 'Portrait 11',
            description: 'Studio portrait'
        }
    ],
    soldiers: [
        {
            src: 'images/Soldiers graduate/PHOTO-2024-11-08-21-49-26.jpg',
            title: 'Soldier Graduate 1',
            description: 'Military graduation'
        },
        {
            src: 'images/Soldiers graduate/137A0963 copy.jpg',
            title: 'Soldier Graduate 2',
            description: 'Proud moment'
        },
        {
            src: 'images/Soldiers graduate/PHOTO-2024-11-11-16-34-13.jpg',
            title: 'Soldier Graduate 3',
            description: 'Service graduation'
        },
        {
            src: 'images/Soldiers graduate/PHOTO-2024-11-14-10-27-56.jpg',
            title: 'Soldier Graduate 4',
            description: 'Military achievement'
        },
        {
            src: 'images/Soldiers graduate/137A0974 copy.jpg',
            title: 'Soldier Graduate 5',
            description: 'Graduation ceremony'
        }
    ],
    volunteers: [
        {
            src: 'images/Volunteers/137A3919.jpg',
            title: 'Volunteer Photo 1',
            description: 'Community service'
        },
        {
            src: 'images/Volunteers/137A3580.jpg',
            title: 'Volunteer Photo 2',
            description: 'Volunteer work'
        },
        {
            src: 'images/Volunteers/137A0040.jpg',
            title: 'Volunteer Photo 3',
            description: 'Helping community'
        },
        {
            src: 'images/Volunteers/137A9967.jpg',
            title: 'Volunteer Photo 4',
            description: 'Volunteer event'
        },
        {
            src: 'images/Volunteers/137A0770.jpg',
            title: 'Volunteer Photo 5',
            description: 'Community support'
        },
        {
            src: 'images/Volunteers/137A0701.jpg',
            title: 'Volunteer Photo 6',
            description: 'Volunteer activities'
        },
        {
            src: 'images/Volunteers/137A0704.jpg',
            title: 'Volunteer Photo 7',
            description: 'Service work'
        },
        {
            src: 'images/Volunteers/137A0708.jpg',
            title: 'Volunteer Photo 8',
            description: 'Community engagement'
        },
        {
            src: 'images/Volunteers/137A0770 2.jpg',
            title: 'Volunteer Photo 9',
            description: 'Volunteer service'
        },
        {
            src: 'images/Volunteers/137A0733.jpg',
            title: 'Volunteer Photo 10',
            description: 'Helping others'
        },
        {
            src: 'images/Volunteers/137A3740.jpg',
            title: 'Volunteer Photo 11',
            description: 'Community work'
        },
        {
            src: 'images/Volunteers/137A3731.jpg',
            title: 'Volunteer Photo 12',
            description: 'Volunteer efforts'
        }
    ],
    weddings: [
        {
            src: 'images/weddings/DSC_0726-min.JPG',
            title: 'Wedding Photo 1',
            description: 'Beautiful wedding moments'
        },
        {
            src: 'images/weddings/DSC_0729-min.JPG',
            title: 'Wedding Photo 2',
            description: 'Wedding celebration'
        },
        {
            src: 'images/weddings/DSC_1086-min.JPG',
            title: 'Wedding Photo 3',
            description: 'Special day'
        },
        {
            src: 'images/weddings/DSC_1229-min.JPG',
            title: 'Wedding Photo 4',
            description: 'Wedding ceremony'
        },
        {
            src: 'images/weddings/DSC_1241-min.JPG',
            title: 'Wedding Photo 5',
            description: 'Love story'
        },
        {
            src: 'images/weddings/DSC_1255-min.JPG',
            title: 'Wedding Photo 6',
            description: 'Wedding memories'
        },
        {
            src: 'images/weddings/DSC_1280-min.JPG',
            title: 'Wedding Photo 7',
            description: 'Celebration of love'
        },
        {
            src: 'images/weddings/DSC_1337-min.JPG',
            title: 'Wedding Photo 8',
            description: 'Wedding moments'
        },
        {
            src: 'images/weddings/DSC_8655-min.JPG',
            title: 'Wedding Photo 9',
            description: 'Beautiful ceremony'
        },
        {
            src: 'images/weddings/DSC_8742-min.JPG',
            title: 'Wedding Photo 10',
            description: 'Wedding day'
        },
        {
            src: 'images/weddings/DSC_8878-min.JPG',
            title: 'Wedding Photo 11',
            description: 'Special moments'
        },
        {
            src: 'images/weddings/DSC_8972-min.JPG',
            title: 'Wedding Photo 12',
            description: 'Wedding photography'
        },
        {
            src: 'images/weddings/DSC_8979-min.JPG',
            title: 'Wedding Photo 13',
            description: 'Love celebration'
        },
        {
            src: 'images/weddings/DSC_9135-min.JPG',
            title: 'Wedding Photo 14',
            description: 'Wedding party'
        },
        {
            src: 'images/weddings/DSC_9165-min.JPG',
            title: 'Wedding Photo 15',
            description: 'Joyful moments'
        },
        {
            src: 'images/weddings/DSC_9207-min.JPG',
            title: 'Wedding Photo 16',
            description: 'Wedding reception'
        },
        {
            src: 'images/weddings/DSC_9244-min.JPG',
            title: 'Wedding Photo 17',
            description: 'Celebration'
        },
        {
            src: 'images/weddings/DSC_2022-min.JPG',
            title: 'Wedding Photo 18',
            description: 'Wedding memories'
        },
        {
            src: 'images/weddings/DSC_2126-min.JPG',
            title: 'Wedding Photo 19',
            description: 'Beautiful wedding'
        },
        {
            src: 'images/weddings/DSC_2717-min.JPG',
            title: 'Wedding Photo 20',
            description: 'Special day'
        },
        {
            src: 'images/weddings/DSC_2721-min.JPG',
            title: 'Wedding Photo 21',
            description: 'Wedding moments'
        }
    ]
};

// Modal functionality
let currentImageIndex = 0;
let currentImages = [];

// Create modal elements if they don't exist
function createModalElements() {
    if (!document.getElementById('imageModal')) {
        const modal = document.createElement('div');
        modal.id = 'imageModal';
        modal.className = 'modal';
        modal.innerHTML = `
            <div class="modal-content">
                <span class="modal-close">&times;</span>
                <button class="modal-prev">&lt;</button>
                <img id="modalImage" src="" alt="Modal Image">
                <button class="modal-next">&gt;</button>
            </div>
        `;
        document.body.appendChild(modal);
    }
}

// Initialize modal elements
createModalElements();

const modal = document.getElementById('imageModal');
const modalImg = document.getElementById('modalImage');
const closeBtn = document.querySelector('.modal-close');
const prevBtn = document.querySelector('.modal-prev');
const nextBtn = document.querySelector('.modal-next');

function openModal(index) {
    currentImageIndex = index;
    modalImg.src = currentImages[currentImageIndex].src;
    modal.classList.add('show');
    document.body.style.overflow = 'hidden';
    updateNavigationButtons();
}

function closeModal() {
    modal.classList.remove('show');
    document.body.style.overflow = '';
}

function showPrevImage() {
    currentImageIndex = (currentImageIndex - 1 + currentImages.length) % currentImages.length;
    modalImg.src = currentImages[currentImageIndex].src;
    updateNavigationButtons();
}

function showNextImage() {
    currentImageIndex = (currentImageIndex + 1) % currentImages.length;
    modalImg.src = currentImages[currentImageIndex].src;
    updateNavigationButtons();
}

function updateNavigationButtons() {
    prevBtn.style.visibility = currentImages.length > 1 ? 'visible' : 'hidden';
    nextBtn.style.visibility = currentImages.length > 1 ? 'visible' : 'hidden';
}

// Event listeners for modal
closeBtn.addEventListener('click', closeModal);
prevBtn.addEventListener('click', showPrevImage);
nextBtn.addEventListener('click', showNextImage);

// Close modal when clicking outside the image
modal.addEventListener('click', (e) => {
    if (e.target === modal) {
        closeModal();
    }
});

// Keyboard navigation
document.addEventListener('keydown', (e) => {
    if (!modal.classList.contains('show')) return;
    
    switch(e.key) {
        case 'Escape':
            closeModal();
            break;
        case 'ArrowLeft':
            showPrevImage();
            break;
        case 'ArrowRight':
            showNextImage();
            break;
    }
});

// Function to get category from URL
function getCategoryFromUrl() {
    const params = new URLSearchParams(window.location.search);
    return params.get('category') || 'portrait';
}

// Function to load category photos
function loadCategoryPhotos() {
    const category = getCategoryFromUrl();
    const galleryGrid = document.querySelector('.gallery-grid');
    const galleryTitle = document.getElementById('gallery-title');
    
    // Update page title with proper formatting
    const categoryTitles = {
        'all': 'All Photography',
        'contracts': 'Contracts Gallery',
        'graduation': 'Graduation Parties Gallery',
        'portrait': 'Portrait Gallery',
        'soldiers': 'Soldiers Graduate Gallery',
        'volunteers': 'Volunteers Gallery',
        'weddings': 'Weddings Gallery'
    };
    
    const titleKey = categoryTitles[category] || 'Gallery';
    
    // Use language manager if available, otherwise use default
    if (window.languageManager) {
        galleryTitle.textContent = window.languageManager.getTranslation(titleKey);
    } else {
        galleryTitle.textContent = titleKey;
    }
    
    // Clear existing content
    galleryGrid.innerHTML = '';
    
    // Get photos for the category
    let photos = [];
    if (category === 'all') {
        // Combine all categories
        Object.values(photoData).forEach(categoryPhotos => {
            photos = photos.concat(categoryPhotos);
        });
    } else {
        photos = photoData[category] || [];
    }
    
    currentImages = photos;
    
    // Create gallery items
    photos.forEach((photo, index) => {
        const item = document.createElement('div');
        item.className = 'gallery-item';
        
        item.innerHTML = `
            <img src="${photo.src}" alt="${photo.title}" loading="lazy">
        `;
        
        // Add click event to open modal
        item.addEventListener('click', () => openModal(index));
        
        galleryGrid.appendChild(item);
    });
    
    // Trigger initial animation check
    handleScrollAnimations();
}

// Function to check if an element is in viewport
function isInViewport(element) {
    const rect = element.getBoundingClientRect();
    return (
        rect.top <= (window.innerHeight || document.documentElement.clientHeight) * 0.8
    );
}

// Function to handle scroll animations
function handleScrollAnimations() {
    const items = document.querySelectorAll('.gallery-item:not(.visible)');
    
    items.forEach(item => {
        if (isInViewport(item)) {
            item.classList.add('visible');
        }
    });
}

// Function to load images
function loadImages() {
    const images = document.querySelectorAll('.gallery-item img[data-src]');
    
    images.forEach(img => {
        if (img.dataset.src) {
            img.src = img.dataset.src;
            img.removeAttribute('data-src');
        }
    });
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
    // Load category photos
    loadCategoryPhotos();
    
    // Add scroll event listener with throttling
    let isScrolling = false;
    window.addEventListener('scroll', () => {
        if (!isScrolling) {
            window.requestAnimationFrame(() => {
                handleScrollAnimations();
                isScrolling = false;
            });
            isScrolling = true;
        }
    });

    // Initialize portfolio items with modal functionality
    const portfolioItems = document.querySelectorAll('.portfolio-item');
    portfolioItems.forEach((item, index) => {
        item.addEventListener('click', () => {
            const img = item.querySelector('img');
            currentImages = Array.from(portfolioItems).map(item => ({
                src: item.querySelector('img').src,
                alt: item.querySelector('img').alt
            }));
            openModal(index);
        });
    });

    // Update gallery title when language changes
    window.addEventListener('languageChanged', () => {
        loadCategoryPhotos();
    });
}); 